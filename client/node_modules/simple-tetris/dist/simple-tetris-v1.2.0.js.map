{"version":3,"sources":["webpack://SimpleTetris/webpack/universalModuleDefinition","webpack://SimpleTetris/webpack/bootstrap","webpack://SimpleTetris/./src/lib/game/constants.ts","webpack://SimpleTetris/./src/lib/game/index.ts","webpack://SimpleTetris/./src/lib/game/actions/tetrimino.actions.ts","webpack://SimpleTetris/./src/lib/game/selectors/game.selectors.ts","webpack://SimpleTetris/./src/lib/game/utilities.ts","webpack://SimpleTetris/./src/lib/game/reducers/state.reducer.ts","webpack://SimpleTetris/./src/lib/game/actions/matrix.actions.ts","webpack://SimpleTetris/./src/main.ts","webpack://SimpleTetris/./src/lib/index.ts","webpack://SimpleTetris/./src/lib/game/game-loop-iteration.ts","webpack://SimpleTetris/./src/lib/game/actions/game-loop.actions.ts","webpack://SimpleTetris/./src/lib/game/store.ts","webpack://SimpleTetris/./src/lib/game/actions/game.actions.ts","webpack://SimpleTetris/./src/lib/game/models/state.model.ts","webpack://SimpleTetris/./src/lib/game/reducers/matrix.reducer.ts","webpack://SimpleTetris/./src/lib/game/models/matrix.model.ts","webpack://SimpleTetris/./src/lib/game/reducers/tetrimino.reducer.ts","webpack://SimpleTetris/./src/lib/game/models/tetrimino.model.ts","webpack://SimpleTetris/./src/lib/game/simple-redux.ts","webpack://SimpleTetris/./src/lib/ascii-runner.ts","webpack://SimpleTetris/./node_modules/terminal-game-io/dist/terminal-game-io-v3.1.0.js","webpack://SimpleTetris/./src/lib/ascii-renderer.ts","webpack://SimpleTetris/./src/lib/version.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","DEFAULT_MATRIX_SIZE_X","DEFAULT_MATRIX_SIZE_Y","KEY_CODE_HARD_DROP","KEY_CODE_LEFT","KEY_CODE_RIGHT","KEY_CODE_ROTATE","TETRIMINO_ROTATIONS","TETRIMINO_SIZE_X","TETRIMINO_SIZE_Y","_","f","X","TETRIMINO_LIST","DEVELOPMENT_MATRIX_20_10","map","item","game_selectors_1","matrixBlocksToRenderSelector","constants_1","game_loop_iteration_1","gameLoopIteration","store_1","createStore","INIT_NEW","MOVE_DOWN","MOVE_LEFT","MOVE_RIGHT","ROTATE","InitNewAction","payload","type","MoveDownAction","MoveLeftAction","MoveRightAction","RotateAction","isNotCollidingSelector","offsetX","offsetY","offsetRotation","state","rotation","tetrimino","index","_a","matrix","blocks","sizeX","sizeY","y","x","xInMatrix","yInMatrix","resultingBlocks","slice","state_reducer_1","generateBlocks","fillWith","push","getRandomInt","min","max","Math","floor","random","getTestingState","stateReducer","undefined","state_model_1","matrix_reducer_1","tetrimino_reducer_1","action","initialState","matrixReducer","tetriminoReducer","INITIALIZE_MATRIX","InitializeMatrixAction","__export","fromGameLoopActions","fromConstants","store","time","keyCode","dispatch","KeyCodeHardDropAction","KeyCodeLeftAction","KeyCodeRightAction","KeyCodeRotateAction","fromTetriminoActions","KEY_CODE_HARD_DROP_ACTION","KEY_CODE_LEFT_ACTION","KEY_CODE_RIGHT_ACTION","KEY_CODE_ROTATE_ACTION","executeThunk","getState","game_actions_1","simple_redux_1","options","SimpleStore","InitializeGameAction","matrixSizeX","matrixSizeY","utilities_1","fromMatrixActions","INITIALIZE_GAME_ACTION","length","fromMarixActions","matrix_model_1","initializeMatrix","__assign","initialMatrix","reducer","tetrimino_model_1","initNew","TetriminoRotation","DEGREE_0","round","moveLeft","moveDown","moveRight","rotate","initialTetrimino","TetriminoIndex","Error","isThunkAction","terminal_game_io_1","ascii_renderer_1","fromGame","AsciiRunner","initializeStore","initializeTerminalGameIo","triggerKeypress","keyName","terminalGameIo","createStoreOptions","createTerminalGameIo","domElementId","fps","frameHandler","keypressHandler","instance","render","data","width","height","drawFrame","Key","ArrowUp","ArrowLeft","ArrowRight","ArrowDown","Escape","exit","getTime","e","a","default","Unknown","Backspace","Tab","Enter","Space","Delete","Home","Insert","End","PageUp","PageDown","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","frameDuration","startTime","Date","initialize","setTimeout","active","currentFrameData","clear","write","clearInterval","intervalId","finalCleanup","initializeEvents","setInterval","AbstractTerminalGameIo","isNode","TerminalGameIoNode","isBrowser","TerminalGameIoBrowser","__extends","setPrototypeOf","__proto__","Array","constructor","document","removeEventListener","keydownEventListener","getElementById","innerHTML","getNormalizedKeyName","addEventListener","keyNameIn","keyNameOut","charCodeAt","filter","indexOf","process","stdin","removeAllListeners","cursorPosition","setRawMode","on","getKeyName","toJSON","stdout","String","fromCharCode","join","toString","navigator","window","argv","Function","eval","version","author","githubUrl","matrixBlocksToRender","renderMatrix","bottomRows","forEach","row"],"mappings":"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AAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,IAGb,CAEE,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,IAGb,CAEE,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,IAGb,CAEE,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,IAGb,CAEE,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,IAGb,CAEE,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,IAGb,CAEE,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,GAEX,CACEjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EACTjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,KAKFjD,EAAAqD,yBAAqC,CAChDrD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAC3BjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAC3BnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAC3BjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAmD,EAC3BnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,EAAGnD,EAAAmD,EAAGnD,EAAAiD,EAAGjD,EAAAiD,EAAGjD,EAAAmD,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","file":"simple-tetris-v1.2.0.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SimpleTetris\"] = factory();\n\telse\n\t\troot[\"SimpleTetris\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { TetriminoList } from './models/tetrimino.model';\n\nexport const DEFAULT_MATRIX_SIZE_X = 10;\nexport const DEFAULT_MATRIX_SIZE_Y = 20;\n\nexport const KEY_CODE_HARD_DROP = 0;     // TODO move all KeyCodes to 'Key' Enum (v2.0.0)\nexport const KEY_CODE_LEFT = 1;\nexport const KEY_CODE_RIGHT = 2;\nexport const KEY_CODE_ROTATE = 3;\n\nexport const TETRIMINO_ROTATIONS = 4;\nexport const TETRIMINO_SIZE_X = 4;\nexport const TETRIMINO_SIZE_Y = 4;\n\nexport const _ = false;\nexport const f = false;\nexport const X = true;\n\nexport const TETRIMINO_LIST: TetriminoList = [\n  [\n    // piece I - index 0\n    [\n      _, _, _, _,      // rotation 0\n      X, X, X, X,\n      _, _, _, _,\n      _, _, _, _\n    ],\n    [\n      _, _, X, _,      // rotation 1\n      _, _, X, _,\n      _, _, X, _,\n      _, _, X, _\n    ],\n    [\n      _, _, _, _,      // rotation 2\n      _, _, _, _,\n      X, X, X, X,\n      _, _, _, _\n    ],\n    [\n      _, X, _, _,      // rotation 3\n      _, X, _, _,\n      _, X, _, _,\n      _, X, _, _\n    ]\n  ],\n  [\n    // piece J - index 1\n    [\n      _, _, _, _,      // rotation 0\n      X, X, X, _,\n      _, _, X, _,\n      _, _, _, _\n    ],\n    [\n      _, X, _, _,      // rotation 1\n      _, X, _, _,\n      X, X, _, _,\n      _, _, _, _\n    ],\n    [\n      X, _, _, _,      // rotation 2\n      X, X, X, _,\n      _, _, _, _,\n      _, _, _, _\n    ],\n    [\n      _, X, X, _,      // rotation 3\n      _, X, _, _,\n      _, X, _, _,\n      _, _, _, _\n    ]\n  ],\n  [\n    // piece L - index 2\n    [\n      _, _, _, _,      // rotation 0\n      X, X, X, _,\n      X, _, _, _,\n      _, _, _, _\n    ],\n    [\n      X, X, _, _,      // rotation 1\n      _, X, _, _,\n      _, X, _, _,\n      _, _, _, _\n    ],\n    [\n      _, _, X, _,      // rotation 2\n      X, X, X, _,\n      _, _, _, _,\n      _, _, _, _\n    ],\n    [\n      _, X, _, _,      // rotation 3\n      _, X, _, _,\n      _, X, X, _,\n      _, _, _, _\n    ]\n  ],\n  [\n    // piece O - index 3\n    [\n      _, _, _, _,      // rotation 0\n      _, X, X, _,\n      _, X, X, _,\n      _, _, _, _\n    ],\n    [\n      _, _, _, _,      // rotation 1\n      _, X, X, _,\n      _, X, X, _,\n      _, _, _, _\n    ],\n    [\n      _, _, _, _,      // rotation 2\n      _, X, X, _,\n      _, X, X, _,\n      _, _, _, _\n    ],\n    [\n      _, _, _, _,      // rotation 3\n      _, X, X, _,\n      _, X, X, _,\n      _, _, _, _\n    ]\n  ],\n  [\n    // piece S - index 4\n    [\n      _, _, _, _,      // rotation 0\n      _, X, X, _,\n      X, X, _, _,\n      _, _, _, _\n    ],\n    [\n      X, _, _, _,      // rotation 1\n      X, X, _, _,\n      _, X, _, _,\n      _, _, _, _\n    ],\n    [\n      _, X, X, _,      // rotation 2\n      X, X, _, _,\n      _, _, _, _,\n      _, _, _, _\n    ],\n    [\n      _, X, _, _,      // rotation 3\n      _, X, X, _,\n      _, _, X, _,\n      _, _, _, _\n    ]\n  ],\n  [\n    // piece T - index 5\n    [\n      _, _, _, _,      // rotation 0\n      X, X, X, _,\n      _, X, _, _,\n      _, _, _, _\n    ],\n    [\n      _, X, _, _,      // rotation 1\n      X, X, _, _,\n      _, X, _, _,\n      _, _, _, _\n    ],\n    [\n      _, X, _, _,      // rotation 2\n      X, X, X, _,\n      _, _, _, _,\n      _, _, _, _\n    ],\n    [\n      _, X, _, _,      // rotation 3\n      _, X, X, _,\n      _, X, _, _,\n      _, _, _, _\n    ]\n  ],\n  [\n    // piece Z - index 6\n    [\n      _, _, _, _,      // rotation 0\n      X, X, _, _,\n      _, X, X, _,\n      _, _, _, _\n    ],\n    [\n      _, X, _, _,      // rotation 1\n      X, X, _, _,\n      X, _, _, _,\n      _, _, _, _\n    ],\n    [\n      X, X, _, _,      // rotation 2\n      _, X, X, _,\n      _, _, _, _,\n      _, _, _, _\n    ],\n    [\n      _, _, X, _,      // rotation 3\n      _, X, X, _,\n      _, X, _, _,\n      _, _, _, _\n    ]\n  ]\n];\n\nexport const DEVELOPMENT_MATRIX_20_10: number[] = [ // TODO delete at the end\n  _, _, _, _, _, _, _, _, _, _,\n  _, _, _, _, _, _, _, _, _, _,\n  _, _, _, _, _, _, _, _, _, _,\n  _, _, _, _, _, _, _, _, _, _,\n  _, _, _, _, _, _, _, _, _, _,\n  _, _, _, _, _, _, _, _, _, _,\n  _, _, _, _, _, _, _, _, _, _,\n  _, _, _, _, _, _, _, _, _, _,\n  _, _, X, _, _, _, _, _, _, _,\n  _, _, X, _, X, X, _, _, _, _,\n  _, _, X, X, X, _, _, _, _, _,\n  _, X, X, X, _, _, _, _, _, _,\n  X, X, _, _, _, _, _, _, _, _,\n  X, X, _, _, _, _, _, _, _, _,\n  X, _, _, _, _, _, _, _, _, _,\n  X, _, _, _, _, _, X, _, _, _,\n  X, X, _, _, _, _, X, X, X, X,\n  X, _, _, _, X, X, X, _, X, _,\n  _, _, _, _, X, _, X, X, X, X,\n  _, _, _, X, X, _, _, X, X, X\n].map((item) => item ? 1 : 0);\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nexport { IMatrix } from './models/matrix.model';\nexport { IState } from './models/state.model';\nexport { ITetrimino } from './models/tetrimino.model';\nexport { matrixBlocksToRenderSelector } from './selectors/game.selectors';\n\nexport {\n  KEY_CODE_HARD_DROP,\n  KEY_CODE_LEFT,\n  KEY_CODE_RIGHT,\n  KEY_CODE_ROTATE\n} from './constants';\n\nexport {\n  gameLoopIteration,\n  GameLoopIteration\n} from './game-loop-iteration';\n\nexport {\n  createStore,\n  ICreateStoreOptions,\n  Store,\n  StoreFactory\n} from './store';\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { IAction } from '../simple-redux';\n\nexport const INIT_NEW = 'INIT_NEW';\nexport const MOVE_DOWN = 'MOVE_DOWN';\nexport const MOVE_LEFT = 'MOVE_LEFT';\nexport const MOVE_RIGHT = 'MOVE_RIGHT';\nexport const ROTATE = 'ROTATE';\n\n/*tslint:disable:max-classes-per-file*/\n\nexport class InitNewAction implements IAction {\n  public readonly type = INIT_NEW;\n\n  public constructor(\n    public payload: {\n      index: number,\n      matrixSizeX: number\n    }\n  ) { }\n}\n\nexport class MoveDownAction implements IAction {\n  public readonly type = MOVE_DOWN;\n\n  public constructor(\n    public payload: {\n      offsetY: number\n    }\n  ) { }\n}\n\nexport class MoveLeftAction implements IAction {\n  public readonly type = MOVE_LEFT;\n}\n\nexport class MoveRightAction implements IAction {\n  public readonly type = MOVE_RIGHT;\n}\n\nexport class RotateAction implements IAction {\n  public readonly type = ROTATE;\n}\n\nexport type TetriminoActionsUnion =\n  InitNewAction |\n  MoveDownAction |\n  MoveLeftAction |\n  MoveRightAction |\n  RotateAction;\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { IState } from '..';\nimport { TETRIMINO_LIST, TETRIMINO_ROTATIONS, TETRIMINO_SIZE_X, TETRIMINO_SIZE_Y } from '../constants';\n\nexport const isNotCollidingSelector = (\n  offsetX: number = 0,\n  offsetY: number = 0,\n  offsetRotation: number = 0\n) => {\n  return (state: IState): boolean => {\n    const rotation = (state.tetrimino.rotation + TETRIMINO_ROTATIONS + offsetRotation) % TETRIMINO_ROTATIONS;\n    const tetrimino = TETRIMINO_LIST[state.tetrimino.index][rotation];\n    const { blocks, sizeX, sizeY } = state.matrix;\n\n    for (let y = 0; y < TETRIMINO_SIZE_Y; y++) {\n      for (let x = 0; x < TETRIMINO_SIZE_X; x++) {\n        const xInMatrix = state.tetrimino.x + offsetX + x;\n        const yInMatrix = state.tetrimino.y + offsetY + y;\n\n        if (\n          tetrimino[y * TETRIMINO_SIZE_X + x] && (\n            xInMatrix < 0 || sizeX <= xInMatrix ||\n            yInMatrix < 0 || sizeY <= yInMatrix ||\n            blocks[yInMatrix * sizeX + xInMatrix]\n          )\n        ) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n};\n\nexport const matrixBlocksToRenderSelector = (state: IState): number[] => {\n  const tetrimino = TETRIMINO_LIST[state.tetrimino.index][state.tetrimino.rotation];\n  const { sizeX, sizeY } = state.matrix;\n  const resultingBlocks = [...state.matrix.blocks];\n\n  for (let y = 0; y < TETRIMINO_SIZE_Y; y++) {\n    for (let x = 0; x < TETRIMINO_SIZE_X; x++) {\n      const xInMatrix = state.tetrimino.x + x;\n      const yInMatrix = state.tetrimino.y + y;\n\n      if (\n        0 <= xInMatrix && xInMatrix < sizeX &&\n        0 <= yInMatrix && yInMatrix < sizeY &&\n        tetrimino[y * TETRIMINO_SIZE_X + x]\n      ) {\n        resultingBlocks[yInMatrix * sizeX + xInMatrix] = 1; // TODO here implement tetrimino colors in the future\n      }\n    }\n  }\n\n  return resultingBlocks;\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { IState } from './models/state.model';\nimport { stateReducer } from './reducers/state.reducer';\n\nexport const generateBlocks = (sizeX: number, sizeY: number, fillWith: number = 0): number[] => {\n  const blocks = [];\n\n  for (let y = 0; y < sizeY; y++) {\n    for (let x = 0; x < sizeX; x++) {\n      blocks.push(fillWith);\n    }\n  }\n\n  return blocks;\n};\n\nexport const getRandomInt = (min: number, max: number): number => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nexport const getTestingState = (\n  blocks: boolean[],\n  sizeX: number,\n  sizeY: number,\n  index: number,\n  rotation: number,\n  x: number,\n  y: number\n) => {\n  const state: IState = stateReducer(undefined, { type: undefined });\n\n  state.matrix.blocks = blocks.map((item) => item ? 1 : 0);\n  state.matrix.sizeX = sizeX;\n  state.matrix.sizeY = sizeY;\n  state.tetrimino.index = index;\n  state.tetrimino.rotation = rotation;\n  state.tetrimino.x = x;\n  state.tetrimino.y = y;\n\n  return state;\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { IState } from '..';\nimport { MatrixActionsUnion } from '../actions/matrix.actions';\nimport { TetriminoActionsUnion } from '../actions/tetrimino.actions';\nimport { initialState } from '../models/state.model';\nimport { Reducer } from '../simple-redux';\nimport { matrixReducer } from './matrix.reducer';\nimport { tetriminoReducer } from './tetrimino.reducer';\n\nexport const stateReducer: Reducer<IState> = (\n  state: IState = initialState,\n  action: MatrixActionsUnion | TetriminoActionsUnion\n): IState => {\n  return {\n    matrix: matrixReducer(state.matrix, action),\n    tetrimino: tetriminoReducer(state.tetrimino, action)\n  };\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { IAction } from '../simple-redux';\n\nexport const INITIALIZE_MATRIX = 'INITIALIZE_MATRIX';\n\n/*tslint:disable:max-classes-per-file*/\n\nexport class InitializeMatrixAction implements IAction {\n  public readonly type = INITIALIZE_MATRIX;\n\n  public constructor(\n    public payload: {\n      sizeX: number,\n      sizeY: number\n    }\n  ) { }\n}\n\nexport type MatrixActionsUnion =\n  InitializeMatrixAction;\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nexport * from './lib';\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nexport * from './game';\nexport * from './ascii-runner';\nexport * from './version';\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport * as fromGameLoopActions from './actions/game-loop.actions';\nimport * as fromConstants from './constants';\nimport { Store } from './store';\n\nexport const gameLoopIteration: GameLoopIteration = (\n  store: Store,\n  time: number,\n  keyCode: number\n): void => {\n  switch (keyCode) {\n    case fromConstants.KEY_CODE_HARD_DROP:\n      store.dispatch(new fromGameLoopActions.KeyCodeHardDropAction());\n      break;\n    case fromConstants.KEY_CODE_LEFT:\n      store.dispatch(new fromGameLoopActions.KeyCodeLeftAction());\n      break;\n    case fromConstants.KEY_CODE_RIGHT:\n      store.dispatch(new fromGameLoopActions.KeyCodeRightAction());\n      break;\n    case fromConstants.KEY_CODE_ROTATE:\n      store.dispatch(new fromGameLoopActions.KeyCodeRotateAction());\n      break;\n  }\n};\n\n/*\nDedicated 'GameLoopIteration' type solves the problem in the *.d.ts file:\n  ERROR in node_modules/simple-tetris/dist/lib/game/game-loop-iteration.d.ts(1,49): error TS1110: Type expected.\n  node_modules/simple-tetris/dist/lib/game/game-loop-iteration.d.ts(1,124): error TS1109: Expression expected.\n\nIt look like older typescript compilers does't understand types expressed as inline import:\n  export declare const gameLoopIteration: (\n    store: import(\"./simple-redux\").SimpleStore<import(\"./models/state.model\").IState>,\n    time: number,\n    keyCode: number\n  ) => void;\n\nTODO keep an eye on this problem\n */\nexport type GameLoopIteration = (store: Store, time: number, keyCode: number) => void;\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { isNotCollidingSelector } from '../selectors/game.selectors';\nimport { IThunkAction } from '../simple-redux';\nimport { Store } from '../store';\nimport * as fromTetriminoActions from './tetrimino.actions';\n\nexport const KEY_CODE_HARD_DROP_ACTION = 'KEY_CODE_HARD_DROP_ACTION';\nexport const KEY_CODE_LEFT_ACTION = 'KEY_CODE_LEFT_ACTION';\nexport const KEY_CODE_RIGHT_ACTION = 'KEY_CODE_RIGHT_ACTION';\nexport const KEY_CODE_ROTATE_ACTION = 'KEY_CODE_ROTATE_ACTION';\n\n/*tslint:disable:max-classes-per-file*/\n\nexport class KeyCodeHardDropAction implements IThunkAction<Store> {\n  public readonly type = KEY_CODE_HARD_DROP_ACTION;\n\n  public executeThunk(store: Store): void {\n    let offsetY = 0;\n\n    // TODO find 'the bootom' in loop via isNotCollidingSelector(0, ++offsetY)\n    if (isNotCollidingSelector(0, ++offsetY)(store.getState())) {\n      store.dispatch(new fromTetriminoActions.MoveDownAction({ offsetY }));\n    }\n  }\n}\n\nexport class KeyCodeLeftAction implements IThunkAction<Store> {\n  public readonly type = KEY_CODE_LEFT_ACTION;\n\n  public executeThunk(store: Store): void {\n    if (isNotCollidingSelector(-1)(store.getState())) {\n      store.dispatch(new fromTetriminoActions.MoveLeftAction());\n    }\n  }\n}\n\nexport class KeyCodeRightAction implements IThunkAction<Store> {\n  public readonly type = KEY_CODE_RIGHT_ACTION;\n\n  public executeThunk(store: Store): void {\n    if (isNotCollidingSelector(1)(store.getState())) {\n      store.dispatch(new fromTetriminoActions.MoveRightAction());\n    }\n  }\n}\n\nexport class KeyCodeRotateAction implements IThunkAction<Store> {\n  public readonly type = KEY_CODE_ROTATE_ACTION;\n\n  public executeThunk(store: Store): void {\n    if (isNotCollidingSelector(0, 0, 1)(store.getState())) {\n      store.dispatch(new fromTetriminoActions.RotateAction());\n    }\n  }\n}\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { InitializeGameAction } from './actions/game.actions';\nimport { DEFAULT_MATRIX_SIZE_X, DEFAULT_MATRIX_SIZE_Y } from './constants';\nimport { IState } from './models/state.model';\nimport { stateReducer } from './reducers/state.reducer';\nimport { SimpleStore } from './simple-redux';\n\nexport type Store = SimpleStore<IState>;\n\nexport interface ICreateStoreOptions {\n  matrixSizeX: number;\n  matrixSizeY: number;\n}\n\nexport type StoreFactory = (options?: ICreateStoreOptions) => Store;\n\nexport const createStore: StoreFactory = (options?: ICreateStoreOptions): Store => {\n  const store: Store = new SimpleStore<IState>(stateReducer);\n\n  store.dispatch(new InitializeGameAction({\n    matrixSizeX: (options && options.matrixSizeX) || DEFAULT_MATRIX_SIZE_X,\n    matrixSizeY: (options && options.matrixSizeY) || DEFAULT_MATRIX_SIZE_Y\n  }));\n\n  return store;\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { TETRIMINO_LIST } from '../constants';\nimport { IThunkAction } from '../simple-redux';\nimport { Store } from '../store';\nimport { getRandomInt } from '../utilities';\nimport * as fromMatrixActions from './matrix.actions';\nimport * as fromTetriminoActions from './tetrimino.actions';\n\nexport const INITIALIZE_GAME_ACTION = 'INITIALIZE_GAME_ACTION';\n\n/*tslint:disable:max-classes-per-file*/\n\nexport class InitializeGameAction implements IThunkAction<Store> {\n  public readonly type = INITIALIZE_GAME_ACTION;\n\n  public constructor(\n    public payload: {\n      matrixSizeX: number,\n      matrixSizeY: number\n    }\n  ) { }\n\n  public executeThunk(store: Store): void {\n    const { matrixSizeX, matrixSizeY } = this.payload;\n\n    store.dispatch(new fromMatrixActions.InitializeMatrixAction({\n      sizeX: matrixSizeX,\n      sizeY: matrixSizeY\n    }));\n\n    store.dispatch(new fromTetriminoActions.InitNewAction({\n      index: getRandomInt(0, TETRIMINO_LIST.length - 1),\n      matrixSizeX\n    }));\n  }\n}\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { IMatrix } from './matrix.model';\nimport { ITetrimino } from './tetrimino.model';\n\nexport interface IState {\n  matrix: IMatrix;\n  tetrimino: ITetrimino;\n}\n\nexport const initialState: IState = {\n  matrix: undefined,\n  tetrimino: undefined\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { IMatrix } from '..';\nimport * as fromMarixActions from '../actions/matrix.actions';\nimport { DEFAULT_MATRIX_SIZE_X, DEFAULT_MATRIX_SIZE_Y, DEVELOPMENT_MATRIX_20_10 } from '../constants';\nimport { initialMatrix } from '../models/matrix.model';\nimport { IReducerMap, Reducer } from '../simple-redux';\nimport { generateBlocks } from '../utilities';\n\nconst initializeMatrix = (state: IMatrix, action: fromMarixActions.InitializeMatrixAction): IMatrix => {\n  const { sizeX, sizeY } = action.payload;\n\n  return {\n    ...state,\n    blocks: (sizeX === DEFAULT_MATRIX_SIZE_X && sizeY === DEFAULT_MATRIX_SIZE_Y)\n      ? [...DEVELOPMENT_MATRIX_20_10]\n      : generateBlocks(sizeX, sizeY),\n    sizeX,\n    sizeY\n  };\n};\n\nexport const matrixReducer: Reducer<IMatrix> = (\n  state: IMatrix = initialMatrix,\n  action: fromMarixActions.MatrixActionsUnion\n): IMatrix => {\n  const reducerMap: IReducerMap<IMatrix> = {\n    [fromMarixActions.INITIALIZE_MATRIX]: initializeMatrix\n  };\n  const reducer = reducerMap[action.type];\n\n  return reducer ? reducer(state, action) : state;\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nexport interface IMatrix {\n  blocks: number[];\n  sizeX: number;\n  sizeY: number;\n}\n\nexport const initialMatrix: IMatrix = {\n  blocks: [],\n  sizeX: null,\n  sizeY: null\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { ITetrimino } from '..';\nimport * as fromTetriminoActions from '../actions/tetrimino.actions';\nimport { TETRIMINO_ROTATIONS, TETRIMINO_SIZE_X } from '../constants';\nimport { initialTetrimino, TetriminoRotation } from '../models/tetrimino.model';\nimport { IReducerMap, Reducer } from '../simple-redux';\n\nconst initNew = (state: ITetrimino, action: fromTetriminoActions.InitNewAction): ITetrimino => {\n  return {\n    ...state,\n    index: action.payload.index,\n    rotation: TetriminoRotation.DEGREE_0,\n    x: Math.round((action.payload.matrixSizeX - TETRIMINO_SIZE_X) / 2),\n    y: 0\n  };\n};\n\nconst moveLeft = (state: ITetrimino, action: fromTetriminoActions.MoveLeftAction): ITetrimino => {\n  return {\n    ...state,\n    x: state.x - 1\n  };\n};\n\nconst moveDown = (state: ITetrimino, action: fromTetriminoActions.MoveDownAction): ITetrimino => {\n  return {\n    ...state,\n    y: state.y + action.payload.offsetY\n  };\n};\n\nconst moveRight = (state: ITetrimino, action: fromTetriminoActions.MoveRightAction): ITetrimino => {\n  return {\n    ...state,\n    x: state.x + 1\n  };\n};\n\nconst rotate = (state: ITetrimino, action: fromTetriminoActions.RotateAction): ITetrimino => {\n  return {\n    ...state,\n    rotation: (state.rotation + 1) % TETRIMINO_ROTATIONS\n  };\n};\n\nexport const tetriminoReducer: Reducer<ITetrimino> = (\n  state: ITetrimino = initialTetrimino,\n  action: fromTetriminoActions.TetriminoActionsUnion\n): ITetrimino => {\n  const reducerMap: IReducerMap<ITetrimino> = {\n    [fromTetriminoActions.INIT_NEW]: initNew,\n    [fromTetriminoActions.MOVE_DOWN]: moveDown,\n    [fromTetriminoActions.MOVE_LEFT]: moveLeft,\n    [fromTetriminoActions.MOVE_RIGHT]: moveRight,\n    [fromTetriminoActions.ROTATE]: rotate\n  };\n  const reducer = reducerMap[action.type];\n\n  return reducer ? reducer(state, action) : state;\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nexport type Tetrimino = [\n  boolean, boolean, boolean, boolean,\n  boolean, boolean, boolean, boolean,\n  boolean, boolean, boolean, boolean,\n  boolean, boolean, boolean, boolean\n];\n\nexport type TetriminoRotations = [Tetrimino, Tetrimino, Tetrimino, Tetrimino];\nexport type TetriminoList = TetriminoRotations[];\n\nexport enum TetriminoIndex { // TODO rename it to TetriminoType and add to ITetrimino interface (v2.0.0)\n  I = 0,\n  J = 1,\n  L = 2,\n  O = 3,\n  S = 4,\n  T = 5,\n  Z = 6\n}\n\nexport enum TetriminoRotation { // TODO add to ITetrimino interface (v2.0.0)\n  DEGREE_0 = 0,\n  DEGREE_90_CW = 1,\n  DEGREE_180_CW = 2,\n  DEGREE_270_CW = 3\n}\n\nexport interface ITetrimino {\n  index: number;\n  rotation: number;\n  x: number;\n  y: number;\n}\n\nexport const initialTetrimino: ITetrimino = {\n  index: null,\n  rotation: null,\n  x: null,\n  y: null\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\n/*\n * This file provides very simple store functionality inspired by:\n *\n *   - Redux\n *     https://github.com/reduxjs/redux\n *\n *   - Redux Thunk\n *     https://github.com/reduxjs/redux-thunk\n *\n *   - NgRx\n *     https://github.com/ngrx/platform\n *\n */\n\nexport interface IAction {\n  type: string;\n}\n\nexport interface IThunkAction<S> extends IAction {\n  executeThunk(store: S): void;\n}\n\nconst isThunkAction = <S>(action: IAction | IThunkAction<SimpleStore<S>>): action is IThunkAction<SimpleStore<S>> => {\n  return (action as IThunkAction<SimpleStore<S>>).executeThunk !== undefined;\n};\n\nexport type Reducer<S> = (state: S, action: IAction) => S;\n\nexport interface IReducerMap<S> {\n  [key: string]: Reducer<S>;\n}\n\nexport class SimpleStore<S> {\n  protected state: S;\n\n  public constructor(\n    protected reducer: Reducer<S>\n  ) {\n    this.dispatch({ type: undefined });\n  }\n\n  public dispatch(action: IAction | IThunkAction<SimpleStore<S>>) {\n    if (!action) {\n      throw new Error('Please provide valid action!');\n    }\n\n    // console.log(action.type, (action as any).payload);\n\n    this.state = this.reducer(this.state, action);\n\n    if (isThunkAction(action)) {\n      action.executeThunk(this);\n    }\n  }\n\n  public getState(): S {\n    return this.state;\n  }\n}\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport { createTerminalGameIo, ITerminalGameIo, Key, KeyName } from 'terminal-game-io';\n\nimport { render } from './ascii-renderer';\nimport * as fromGame from './game';\n\nexport interface IAsciiRunnerOptions {\n  createStoreOptions?: fromGame.ICreateStoreOptions;\n  domElementId?: string;\n}\n\nexport class AsciiRunner {\n  protected terminalGameIo: ITerminalGameIo;\n  protected store: fromGame.Store;\n\n  public constructor(options?: IAsciiRunnerOptions) {\n    this.initializeStore(options);\n    this.initializeTerminalGameIo(options);\n  }\n\n  public triggerKeypress(keyName: string): void {\n    this.terminalGameIo.triggerKeypress(keyName);\n  }\n\n  protected initializeStore(options: IAsciiRunnerOptions): void {\n    this.store = fromGame.createStore(\n      options && options.createStoreOptions ? options.createStoreOptions : null\n    );\n  }\n\n  protected initializeTerminalGameIo(options: IAsciiRunnerOptions): void {\n    this.terminalGameIo = createTerminalGameIo({\n      domElementId: options && options.domElementId ? options.domElementId : null,\n      fps: 0.5,\n      frameHandler: this.frameHandler.bind(this),\n      keypressHandler: this.keypressHandler.bind(this)\n    });\n  }\n\n  protected frameHandler(instance: ITerminalGameIo): void {\n    const { data, width, height } = render(this.store.getState());\n\n    instance.drawFrame(data, width, height);\n  }\n\n  protected keypressHandler(instance: ITerminalGameIo, keyName: KeyName): void {\n    let keyCode: number = null;\n\n    switch (keyName) {\n      case Key.ArrowUp:\n        keyCode = fromGame.KEY_CODE_ROTATE;\n        break;\n      case Key.ArrowLeft:\n        keyCode = fromGame.KEY_CODE_LEFT;\n        break;\n      case Key.ArrowRight:\n        keyCode = fromGame.KEY_CODE_RIGHT;\n        break;\n      case Key.ArrowDown:\n        keyCode = fromGame.KEY_CODE_HARD_DROP;\n        break;\n      case Key.Escape:\n        instance.exit();\n        break;\n    }\n\n    fromGame.gameLoopIteration(this.store, this.terminalGameIo.getTime(), keyCode);\n\n    this.frameHandler(instance);\n  }\n}\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.TerminalGameIo=t():e.TerminalGameIo=t()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=3)}([function(e,t,n){\"use strict\";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,\"__esModule\",{value:!0}),r(n(4)),r(n(9)),r(n(11));var a=n(1);t.Key=a.Key},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e.Unknown=\"\",e.Backspace=\"Backspace\",e.Tab=\"Tab\",e.Enter=\"Enter\",e.Escape=\"Escape\",e.Space=\"Space\",e.Delete=\"Delete\",e.ArrowUp=\"ArrowUp\",e.ArrowDown=\"ArrowDown\",e.ArrowRight=\"ArrowRight\",e.ArrowLeft=\"ArrowLeft\",e.Home=\"Home\",e.Insert=\"Insert\",e.End=\"End\",e.PageUp=\"PageUp\",e.PageDown=\"PageDown\",e.F1=\"F1\",e.F2=\"F2\",e.F3=\"F3\",e.F4=\"F4\",e.F5=\"F5\",e.F6=\"F6\",e.F7=\"F7\",e.F8=\"F8\",e.F9=\"F9\",e.F10=\"F10\",e.F11=\"F11\",e.F12=\"F12\"}(t.Key||(t.Key={}))},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e){var t=this;this.frameDuration=Math.round(1e3/e.fps),this.frameHandler=e.frameHandler,this.keypressHandler=e.keypressHandler,this.startTime=(new Date).getTime(),this.initialize(),setTimeout(function(){return t.frameHandler(t)},0)}return e.prototype.drawFrame=function(e,t,n){var r,a=\"\",o=0;if(this.active){if(e.length!==t*n)throw new Error(\"Frame data is not matching drawFrame dimensions\");if(this.currentFrameData!==e){this.clear();for(var i=0;i<n;i++){r=\"\";for(var y=0;y<t;y++)r+=e[o++];a+=r+\"\\n\"}this.write(a),this.currentFrameData=e}}},e.prototype.exit=function(){this.active=!1,clearInterval(this.intervalId),this.finalCleanup()},e.prototype.getTime=function(){return((new Date).getTime()-this.startTime)/1e3},e.prototype.triggerKeypress=function(e){this.active&&this.keypressHandler(this,e)},e.prototype.initialize=function(){var e=this;this.initializeEvents(),this.intervalId=setInterval(function(){return e.frameHandler(e)},this.frameDuration),this.active=!0},e}();t.AbstractTerminalGameIo=r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(0))},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),a=n(5),o=n(7);t.createTerminalGameIo=function(e){var t;if(r.isNode)t=o.TerminalGameIoNode;else{if(!r.isBrowser)throw new Error(\"Unable to create TerminalGameIo object due to environment detection problem.\");t=a.TerminalGameIoBrowser}return new t(e)}},function(e,t,n){\"use strict\";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(0),o=n(6),i=function(e){function t(t){var n=e.call(this,t)||this;return n.domElementId=t.domElementId?t.domElementId:\"root\",n}return r(t,e),t.prototype.finalCleanup=function(){document.removeEventListener(\"keydown\",this.keydownEventListener)},t.prototype.clear=function(){var e=a.getElementById(this.domElementId);e&&(e.innerHTML=\"\")},t.prototype.initializeEvents=function(){var e=this;this.keydownEventListener=function(t){var n=o.getNormalizedKeyName(t);e.keypressHandler(e,n)},document.addEventListener(\"keydown\",this.keydownEventListener)},t.prototype.write=function(e){var t=a.getElementById(this.domElementId);t&&(t.innerHTML=t.innerHTML+e)},t}(n(2).AbstractTerminalGameIo);t.TerminalGameIoBrowser=i},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(1),a=[{keyNameIn:[\"Backspace\"],keyNameOut:r.Key.Backspace},{keyNameIn:[\"Tab\"],keyNameOut:r.Key.Tab},{keyNameIn:[\"Enter\"],keyNameOut:r.Key.Enter},{keyNameIn:[\"Escape\",\"Esc\"],keyNameOut:r.Key.Escape},{keyNameIn:[\"Space\",\"Spacebar\",\" \"],keyNameOut:r.Key.Space},{keyNameIn:[\"Delete\",\"Del\"],keyNameOut:r.Key.Delete},{keyNameIn:[\"ArrowUp\",\"Up\"],keyNameOut:r.Key.ArrowUp},{keyNameIn:[\"ArrowDown\",\"Down\"],keyNameOut:r.Key.ArrowDown},{keyNameIn:[\"ArrowRight\",\"Right\"],keyNameOut:r.Key.ArrowRight},{keyNameIn:[\"ArrowLeft\",\"Left\"],keyNameOut:r.Key.ArrowLeft},{keyNameIn:[\"Home\"],keyNameOut:r.Key.Home},{keyNameIn:[\"Insert\"],keyNameOut:r.Key.Insert},{keyNameIn:[\"End\"],keyNameOut:r.Key.End},{keyNameIn:[\"PageUp\"],keyNameOut:r.Key.PageUp},{keyNameIn:[\"PageDown\"],keyNameOut:r.Key.PageDown},{keyNameIn:[\"F1\"],keyNameOut:r.Key.F1},{keyNameIn:[\"F2\"],keyNameOut:r.Key.F2},{keyNameIn:[\"F3\"],keyNameOut:r.Key.F3},{keyNameIn:[\"F4\"],keyNameOut:r.Key.F4},{keyNameIn:[\"F5\"],keyNameOut:r.Key.F5},{keyNameIn:[\"F6\"],keyNameOut:r.Key.F6},{keyNameIn:[\"F7\"],keyNameOut:r.Key.F7},{keyNameIn:[\"F8\"],keyNameOut:r.Key.F8},{keyNameIn:[\"F9\"],keyNameOut:r.Key.F9},{keyNameIn:[\"F10\"],keyNameOut:r.Key.F10},{keyNameIn:[\"F11\"],keyNameOut:r.Key.F11},{keyNameIn:[\"F12\"],keyNameOut:r.Key.F12},{keyNameIn:[\"Add\"],keyNameOut:\"+\"},{keyNameIn:[\"Decimal\"],keyNameOut:\".\"},{keyNameIn:[\"Divide\"],keyNameOut:\"/\"},{keyNameIn:[\"Multiply\"],keyNameOut:\"*\"},{keyNameIn:[\"Subtract\"],keyNameOut:\"-\"}];t.getNormalizedKeyName=function(e){var t;return function(e){return 1===e.length&&\"!\".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<=\"}\".charCodeAt(0)}(e.key)?e.key:1===(t=a.filter(function(t){return t.keyNameIn.indexOf(e.key)>=0})).length?t[0].keyNameOut:r.Key.Unknown}},function(e,t,n){\"use strict\";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(0),o=n(8),i=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.finalCleanup=function(){a.process.stdin.removeAllListeners(),a.process.exit()},t.prototype.clear=function(){this.write(o.cursorPosition(0,0))},t.prototype.initializeEvents=function(){var e=this;a.process.stdin.setRawMode(!0),a.process.stdin.on(\"data\",function(t){var n=o.getKeyName(t.toJSON().data);e.keypressHandler(e,n)})},t.prototype.write=function(e){a.process.stdout.write(e)},t}(n(2).AbstractTerminalGameIo);t.TerminalGameIoNode=i},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(1),a=String.fromCharCode(27)+\"[\";t.cursorPosition=function(e,t){return\"\"+a+(t+1)+\";\"+(t+1)+\"H\"};var o=[{data:[[8],[127]],keyName:r.Key.Backspace},{data:[[9]],keyName:r.Key.Tab},{data:[[13]],keyName:r.Key.Enter},{data:[[27]],keyName:r.Key.Escape},{data:[[32]],keyName:r.Key.Space},{data:[[27,91,51,126]],keyName:r.Key.Delete},{data:[[27,91,65]],keyName:r.Key.ArrowUp},{data:[[27,91,66]],keyName:r.Key.ArrowDown},{data:[[27,91,67]],keyName:r.Key.ArrowRight},{data:[[27,91,68]],keyName:r.Key.ArrowLeft},{data:[[27,91,49,126]],keyName:r.Key.Home},{data:[[27,91,50,126]],keyName:r.Key.Insert},{data:[[27,91,52,126]],keyName:r.Key.End},{data:[[27,91,53,126]],keyName:r.Key.PageUp},{data:[[27,91,54,126]],keyName:r.Key.PageDown},{data:[[27,91,91,65],[27,91,49,49,126]],keyName:r.Key.F1},{data:[[27,91,91,66],[27,91,49,50,126]],keyName:r.Key.F2},{data:[[27,91,91,67],[27,91,49,51,126]],keyName:r.Key.F3},{data:[[27,91,91,68],[27,91,49,52,126]],keyName:r.Key.F4},{data:[[27,91,91,69],[27,91,49,53,126]],keyName:r.Key.F5},{data:[[27,91,49,55,126]],keyName:r.Key.F6},{data:[[27,91,49,56,126]],keyName:r.Key.F7},{data:[[27,91,49,57,126]],keyName:r.Key.F8},{data:[[27,91,50,48,126]],keyName:r.Key.F9},{data:[[27,91,50,49,126]],keyName:r.Key.F10},{data:[[27,91,50,51,126]],keyName:r.Key.F11},{data:[[27,91,50,52,126]],keyName:r.Key.F12}];t.getKeyName=function(e){var t;return function(e){return 1===e.length&&\"!\".charCodeAt(0)<=e[0]&&e[0]<=\"}\".charCodeAt(0)}(e)?String.fromCharCode(e[0]):1===(t=o.filter(function(t){return t.data.filter(function(t){return t.join(\",\")===e.join(\",\")}).length>0})).length?t[0].keyName:r.Key.Unknown}},function(e,t,n){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.isNode=void 0!==e&&\"[object global]\"===toString.call(e),t.isBrowser=!t.isNode&&\"undefined\"!=typeof navigator&&\"undefined\"!=typeof document&&\"undefined\"!=typeof window,t.getElementById=function(e){return t.isBrowser?document.getElementById(e):null},t.argv=t.isNode?e.process.argv:[],t.process=t.isNode?e.process:null}).call(this,n(10))},function(e,t){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.version=\"3.1.0\",t.author=\"Robert Rypuła\",t.githubUrl=\"https://github.com/robertrypula\"}])});\n//# sourceMappingURL=terminal-game-io-v3.1.0.js.map","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nimport * as fromGame from './game';\n\nexport interface IAsciiFrame {\n  data: string;\n  width: number;\n  height: number;\n}\n\nexport const render = (state: fromGame.IState): IAsciiFrame => {\n  const { sizeX, sizeY } = state.matrix;\n  const matrixBlocksToRender = fromGame.matrixBlocksToRenderSelector(state);\n\n  return renderMatrix(matrixBlocksToRender, sizeX, sizeY);\n};\n\nconst renderMatrix = (blocks: number[], sizeX: number, sizeY: number): IAsciiFrame => {\n  const left = '<|';\n  const right = '|>';\n  const squareEmpty = ' .';\n  const squareFilled = '[]';\n  const bottomRows = [\n    [left, '==', right],\n    ['  ', '\\\\/', '  ']\n  ];\n  let data = '';\n\n  for (let y = 0; y < sizeY; y++) {\n    data += left;\n    for (let x = 0; x < sizeX; x++) {\n      data += blocks[y * sizeX + x] ? squareFilled : squareEmpty;\n    }\n    data += right;\n  }\n\n  bottomRows.forEach((row) => {\n    data += row[0];\n    for (let x = 0; x < sizeX; x++) {\n      data += row[1];\n    }\n    data += row[2];\n  });\n\n  return {\n    data,\n    height: sizeY + bottomRows.length,\n    width: left.length + (squareEmpty.length * sizeX) + right.length\n  };\n};\n","// Copyright (c) 2018 Robert Rypuła - https://github.com/robertrypula\n\nexport const version = '1.2.0';\nexport const author = 'Robert Rypuła';\nexport const githubUrl = 'https://github.com/robertrypula';\n"],"sourceRoot":""}